<!doctype html>
<html>
<head>
    <title>CBL-js Demo</title>
    <script type="text/javascript" src="cbl.js"></script>
    <style>
        #debugPreprocessed img, 
        #debugSegmented img {
            margin-right: 5px;
            border: 1px solid #DDDDDD;
        }
        #training {
            margin-top: 20px;
            padding: 10px;
            background-color: #EEEEEE;
        }
    </style>
</head>
<body>
    <img id="testImage" src="captchas/cryptographp/2dg9.gif" />
    <div id="debugPreprocessed"></div>
    <div id="debugSegmented"></div>
    <div id="training">
        <p>Type the letter of the sample you see to train the solver.</p>
        <img id="imgPattern" />
        <input id="txtSolution" type="text" />
    </div>
    <a href="javascript: void(0);" onclick="alert(cbl.solve('testImage'))">Solve</a>
    <script>
        var cbl = new CBL({
            preprocess: function() {
                cbl.binarize(220);
                cbl.colorRegions(50);
                cbl.debugImage("debugPreprocessed");
            },
            blob_min_pixels: 50,
            blob_max_pixels: 350,
            pattern_width: 20,
            pattern_height: 20,
            blob_debug: "debugSegmented"
        });
        
        cbl.train("captchas/cryptographp/2dg9.gif", "imgPattern", "txtSolution", 
            function() { 
                document.getElementById("training").style.display = 'none';
            });
        
        // cbl.solve("captchas/cryptographp/2dg9.gif");        
        // cbl.solve("captchas/cryptographp/gpew.gif");
    </script>
</body>
</html>